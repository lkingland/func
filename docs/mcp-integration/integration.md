# MCP Integration Quick Usage

## ⚠️ EXPERIMENTAL FEATURE

The MCP (Model Context Protocol) server integration is currently **EXPERIMENTAL** and under active development.

### Important Considerations

**AI-Generated Code Risks:**
- Language models can generate incorrect or insecure code
- Commands execute with your user permissions
- Changes to clusters, images, and code happen in real-time
- Review all AI-generated code before accepting changes

**You are responsible for:**
- Reviewing all code generated by the AI
- Understanding the commands being executed
- Managing access to your clusters and registries
- Any consequences of AI-driven actions

---

This document shows how to configure your MCP server with various clients. You do **not** need to run `func mcp start` manually — MCP clients launch it themselves when configured.

**Important:** Before configuring, you must set the `FUNC_ENABLE_MCP` environment variable as described in the Prerequisites section below.

Once configured and enabled, you can also use the MCP server **directly in agent mode while chatting with the model**. This enables seamless access to your functions and tools during conversations.

Base config to add:

```json
{
  "mcpServers": {
    "func-mcp": {
      "command": "func",
      "args": ["mcp", "start"]
    }
  }
}
```

This block should either be the full contents of your MCP config file (for clients that use a dedicated file) or merged into an existing config (for clients like VS Code).

---

## Prerequisites

### Enable Experimental MCP Feature

Before using the MCP server, you must explicitly enable it by setting an environment variable. This is a **required step** and the MCP server will not start without it.

#### Linux / macOS

Add to your shell configuration file (`~/.bashrc`, `~/.zshrc`, `~/.bash_profile`, etc.):

```bash
export FUNC_ENABLE_MCP=true
```

Then reload your configuration:

```bash
source ~/.bashrc  # or source ~/.zshrc, depending on your shell
```

Or simply restart your terminal.

#### Windows (PowerShell)

To set permanently for your user account, run in PowerShell:

```powershell
[System.Environment]::SetEnvironmentVariable('FUNC_ENABLE_MCP', 'true', 'User')
```

Then restart your terminal/IDE.

Alternatively, you can add to your PowerShell profile (`$PROFILE`):

```powershell
$env:FUNC_ENABLE_MCP = "true"
```

#### Windows (Command Prompt)

Set via System Properties:

1. Open System Properties (Win + Pause/Break or search "Environment Variables")
2. Click "Advanced system settings"
3. Click "Environment Variables"
4. Under "User variables", click "New"
5. Variable name: `FUNC_ENABLE_MCP`
6. Variable value: `true`
7. Click OK and restart your terminal/IDE

**Note:** Your MCP client (Claude Desktop, Cursor, VS Code, Windsurf, etc.) must be restarted after setting the environment variable for it to take effect.

---

## Configuration Scope

* **Global configuration**: applies to all projects in the client. Usually stored in a global settings file under your home directory.
* **Local/project configuration**: applies only to the current project or workspace. Usually stored in the project folder.

If both exist, local/project config usually overrides global config.

---

## Claude Desktop

**Config file location:**

* macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
* Windows: `%APPDATA%/Claude/claude_desktop_config.json`
* Linux: `~/.config/Claude/claude_desktop_config.json`

**How to edit:**

* Open the file in a text editor.
* Replace contents with the base config above, or merge it into an existing `mcpServers` block.

Restart Claude Desktop after editing.

---

## Cursor

**Config file location:**

* Global: `~/.cursor/mcp.json`
* Local: `.cursor/mcp.json` inside the project folder

**How to edit:**

* Open or create the file.
* Use the base config above directly, or merge into an existing `mcpServers` object.

Restart Cursor after editing.

---

## Windsurf (Cascade)

**Config file location:**

* Linux/macOS: `~/.codeium/windsurf/mcp_config.json`
* Windows: `%APPDATA%/Codeium/Windsurf/mcp_config.json`

**How to edit:**

* Open the file in a text editor.
* Replace contents with the base config above, or merge into existing config.

Restart Windsurf after editing.

---

## VS Code

**Config file location:**

* Global: `~/.config/Code/User/settings.json` (Linux/macOS)
* Global: `%APPDATA%/Code/User/settings.json` (Windows)
* Local: `.vscode/settings.json` inside the project folder

**How to edit:**

* VS Code’s `settings.json` is usually prefilled with many settings.
* Locate or add a top-level key `mcpServers`.
* Insert the base config block under it.

For example:

```json
{
  // other VS Code settings...
  "mcpServers": {
    "func-mcp": {
      "command": "func",
      "args": ["mcp", "start"]
    }
  }
}
```

Restart VS Code after editing.

